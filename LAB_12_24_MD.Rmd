---
title: "LAB_12_24"
output: html_document
date: "2025-10-05"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Hecho con gusto por Carla Carolina Pérez Hernández (UAEH)
Alumno: Luis Armando González Arellano 
 video 05 - DENSIDAD DEL RELACIONAMIENTO: CASO HIPOTÉTICO 

Objetivo: Estimar la densidad del relacionamiento (rd)
 La densidad varia entre 0 y 1, los valores más grandes indican que la región ha avanzado a
 una VCR en muchos bienes proximos al bien i y tiene mayor probabilidad de exportarlo en el futuro
 mayor densidad, mayor cercanía. Menor densidad, mayor lejanía.
 --------------------------------------------------------------------------------------------------------------------
En este laboratorio vamos a:
 1. Cargar una matriz hipotética de datos
 2. Estimar la VCR de la matriz hipotética
 3. Calcular las co-ocurrencias y el relacionamiento (espacio-producto)
 4. Estimar la densidad del relacionamiento (rd)
Buscamos saber si las industrias que estan relacionadas estan presentes en las regiones o no. Nivel de cercanía
 5. Predecir la entrada de una nueva industria
Econometría usar count(densidad del relacionamiento) como regresora (predictora) de la entrada de una nueva industria

####################################################
 LABORATORIO 5: densidad del relacionamiento (rd) 
```{r}
library(EconGeo)

```
 generate a region- industry matrix
```{r}
set.seed (31)
mat <- matrix(sample(0:100,20,replace=T),ncol=4)
rownames(mat) <- c ("R1","R2","R3","R4","R5")
colnames(mat) <- c ("I1","I2","I3","I4")
dim(mat)

```
 Transformar la matriz en binaria (seria similar a obtener una RCA)
```{r}
mat= rca(mat,binary=T)
```
 
 calcula la matriz de co-ocurrencia de la mat transpuesta
```{r}
c= co_occurrence(t(mat))
c
```
 calcula el relacionamiento con base en las co-ocurrencias
```{r}
r=relatedness(c)
r
```
Convertir el relacionamiento en binario 
```{r}
r[r<1]=0
r[r>1]=1

```
Calcular la Densidad del relacionamiento
```{r}
rd= relatedness_density(mat,r)
rd
```
para econometría

```{r}
rd=get_list(rd)
rd
```
6. Predecir entrada

## generate a first region - industry matrix in which cells represent the presence/absence
## of a RCA (period 1)
```{r}
set.seed(31)
mat1 <- matrix(sample(0:1, 20, replace = TRUE), ncol = 4)
rownames(mat1) <- c("R1", "R2", "R3", "R4", "R5")
colnames(mat1) <- c("I1", "I2", "I3", "I4")
```

## generate a second region - industry matrix in which cells represent the presence/absence
## of a RCA (period 2)
```{r}
mat2 <- mat1
mat2[3, 1] <- 1

mat2
mat1
```
#ver que las posibilidades de entrada es cuando tienes un 0 de VCR
#cuando tienes 1 puedes: permanecer o salir, pero no entrar
# NA, no puede entrar
# 1 tiene potencial de entrada y entró
# 0 puede tener potencial de entrada, pero no ha entrado
```{r}
d= entry_list(mat1, mat2)
d


```
```{r}
colnames(d)= c("Region","Industry","Entry","Period")
d= merge(d, rd, by=c ("Region", "Industry"))

d

```
# lm(dependiente~independiente1+independiente2, data=datos)
# que tanto la "densidad del relacionamiento" impacta la entrada


```{r}
summary (lm(d$Entry~ d$Count))
```

